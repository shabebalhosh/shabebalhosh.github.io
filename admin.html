<html>
  <head>
    <title>Firebase Realtime Database Table</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@500&display=swap');
      * {
        text-align: center;
        font-family: 'Vazirmatn', sans-serif;
      }
    </style>
  </head>
  <body>
    
    <form id="loginForm">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>
      <button type="submit">Login</button>
    </form>

    
    <table class="table" id="dataTable">
      <thead>
        <tr>
          <th>التّبرّع</th>
          <th>رقم الهاتف</th>
          <th>الإسم</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>

    <!-- Firebase App -->
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
    <!-- Firebase Database -->
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-auth.js"></script>
    
    <script>
              // Get a reference to the login form
        var loginForm = document.querySelector("#loginForm");
        
        // Listen for the form submission
        loginForm.addEventListener("submit", function(e) {
          e.preventDefault();
        
          // Get the email and password from the form
          var email = document.querySelector("#email").value;
          var password = document.querySelector("#password").value;
        
          // Sign in the user with their email and password
          firebase.auth().signInWithEmailAndPassword(email, password)
            .then(function(user) {
              // Show the table if the login is successful
              document.querySelector("#dataTable").style.display = "block";
            })
            .catch(function(error) {
              // Handle the error
              alert(error.message);
            });
        });
        
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                document.querySelector("#dataTable").style.display = "block";
            } else {
                // No user is signed in.
                document.querySelector("#dataTable").style.display = "none";
            }
        });

 
    </script>
    
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBSOB0zMXgqb9XOzrWckFvh_OjuhkiTT5M",
        authDomain: "contributionanddonationform.firebaseapp.com",
        databaseURL: "https://contributionanddonationform-default-rtdb.firebaseio.com",
        projectId: "contributionanddonationform",
        storageBucket: "contributionanddonationform.appspot.com",
        messagingSenderId: "965432599487",
        appId: "1:965432599487:web:41c5c59bd1e5dc608f770a"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Get a reference to the database service
      var database = firebase.database();

      // Get a reference to the table body
      var tableBody = document.querySelector("tbody");

      // Listen for changes to the data in the Firebase Realtime Database
      database.ref('donators').on("child_added", function(snapshot) {
        // Get the data from the snapshot
        var data = snapshot.val();

        // Create a new row in the table for the data
        var row = document.createElement("tr");

        // Create a new cell for the ID
        var nameCell = document.createElement("td");
        nameCell.textContent = data.name;

        // Create a new cell for the name
        var phoneNBCell = document.createElement("td");
        phoneNBCell.textContent = data.phoneNB;

        // Create a new cell for the age
        var donationTypeCell = document.createElement("td");
        donationTypeCell.textContent = data.donationType;

        // Append the cells to the row
        row.appendChild(donationTypeCell);
        row.appendChild(phoneNBCell);
        row.appendChild(nameCell);

        // Append the row to the table body
        tableBody.appendChild(row);
      });
    </script>
  </body>
</html>
