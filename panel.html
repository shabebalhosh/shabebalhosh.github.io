<!DOCTYPE html>
<html>
<head>
  <title>Firebase Realtime Database Data</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@500&display=swap');
    * {
      font-family: 'Vazirmatn', sans-serif;
    }
      table {
        width: 100%; /* Width of the table */
        border-collapse: collapse; /* Remove the cell borders */
      }
      th, td {
        border: 1px solid #dddddd; /* Add a border to the cells */
        padding: 8px; /* Add some padding to the cells */
        text-align: left; /* Align the text to the left */
      }
      td {
        text-align: center;
      }
      th {
        background-color: #dddddd; /* Add a light gray background color to the header cells */
        text-align: center;
      }
    </style>
</head>
<body>
  <table id="data-table">
      <tr>
        <th>التْبرّع</th>
        <th>رقم الهاتف</th>
        <th>الإسم</th>
      </tr>
    </table>
  
  <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-database.js"></script>
  
  <script>
    // Initialize Firebase
    var firebaseConfig = {
        apiKey: "AIzaSyBSOB0zMXgqb9XOzrWckFvh_OjuhkiTT5M",
        authDomain: "contributionanddonationform.firebaseapp.com",
        databaseURL: "https://contributionanddonationform-default-rtdb.firebaseio.com",
        projectId: "contributionanddonationform",
        storageBucket: "contributionanddonationform.appspot.com",
        messagingSenderId: "965432599487",
        appId: "1:965432599487:web:41c5c59bd1e5dc608f770a"
      };
    firebase.initializeApp(firebaseConfig);

    // Get a reference to the database
    var database = firebase.database();

    // Handle user authentication
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        // User is signed in, display data table
        displayData();
      } else {
        // User is not signed in, prompt for login
        firebase.auth().signInWithEmailAndPassword(
          "shabebalhosh.lb@gmail.com",
          "ya_mahdi313"
        );
      }
    });

    // Display data in table
    function displayData() {
      // Get reference to table
      var table = document.getElementById("data-table");

      // Get data from database
      var dataRef = database.ref("donators");
      dataRef.on("value", function(snapshot) {
        var data = snapshot.val();

        // Clear existing data in table
        while (table.rows.length > 0) {
          table.deleteRow(0);
        }

        // Add header row to table
        snapshot.forEach(function(childSnapshot) {
          var childKey = childSnapshot.key;
          var childData = childSnapshot.val();
          
          var row = table.insertRow();
          var typeCell = row.insertCell(0);
          var phoneCell = row.insertCell(1);
          var nameCell = row.insertCell(2);
          
          typeCell.innerHTML = childData.donationType;
          phoneCell.innerHTML = childData.phoneNB;
          nameCell.innerHTML = childData.name;
          
        });
      });
    }
  </script>
</body>
</html>
